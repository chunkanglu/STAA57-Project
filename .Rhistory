data = data %>% mutate(Episode.Date = as.Date(Episode.Date, format = "%Y-%m-%d"),
Reported.Date = as.Date(Reported.Date, format = "%Y-%m-%d"))
main_data = data %>% filter(Age.Group != "")
main_data = data %>% filter(Outcome!="ACTIVE") %>% select(-c(X_id, Assigned_ID))
gen_filtered = main_data %>% filter(Client.Gender %in% c("MALE", "FEMALE"))
# We have to note the data was downloaded on March 24, and the dataset is updated every week, so future downloads may get slightly different results.
data = read.csv("COVID19 cases.csv")
# Turn Episode.Date and Reported.Date into Date type
data = data %>% mutate(Episode.Date = as.Date(Episode.Date, format = "%Y-%m-%d"),
Reported.Date = as.Date(Reported.Date, format = "%Y-%m-%d"))
data = data %>% filter(Age.Group != "")
main_data = data %>% filter(Outcome!="ACTIVE") %>% select(-c(X_id, Assigned_ID))
gen_filtered = main_data %>% filter(Client.Gender %in% c("MALE", "FEMALE"))
# Relation between gender and death rate
data_byGender = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(main_data %>% filter(Age.Group != ""), aes(x=Age.Group, fill=Age.Group)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data_byAge %>% filter(Age.Group != ""), aes(x=Age.Group, fill=Age.Group)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
ggplot(main_data %>% filter(Age.Group != ""), aes(x=Age.Group, fill=Age.Group)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
View(data_byAge)
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data_byAge, aes(x = Age.Group, y = deathRate)) +
geom_bar(stat = "identity", fill = "blue", alpha = 0.7) +
labs(title = "Death Rate by Age Group", x = "Age Group", y = "Death Rate") +
theme_minimal()
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data_byAge, aes(x = Age.Group, y = deathRate)) +
geom_bar(stat = "identity", fill = "blue", alpha = 0.7) +
labs(title = "Death Rate by Age Group", x = "Age Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data_byAge, aes(x = Age.Group, y = deathRate, fill=Age.Group)) +
geom_bar(stat = "identity", fill = "blue", alpha = 0.7) +
labs(title = "Death Rate by Age Group", x = "Age Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data_byAge, aes(x = Age.Group, y = deathRate, fill=Age.Group)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs(title = "Death Rate by Age Group", x = "Age Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data_byAge, aes(x = Age.Group, y = deathRate, fill=Age.Group)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Age Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
data_byAge = main_data %>% filter(Age.Group != "") %>% group_by(Age.Group) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byAge) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(main_data %>% filter(Age.Group != ""), aes(x=Age.Group, fill=Age.Group)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byAge, aes(x = Age.Group, y = deathRate, fill=Age.Group)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Age Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
# Relation between gender and death rate
data_byGender = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
# Relation between gender and death rate
data_byGender = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
# Relation between gender and death rate
data_byGender = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
# Relation between gender+age and death rate
data_byGender = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender,Age.Group)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL")) %>% arrange(desc(deathRate))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data, aes(x=Client.Gender, fill=Client.Gender)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL") )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases))
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL") )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases)) %>%  head(10)
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
# Create map
map <- leaflet(topCaseLocation) %>%
addProviderTiles(providers$Stamen.TonerLite) %>%
setView(lng = -79.38, lat = 43.65, zoom = 11) # Set center and zoom level
install.packages("leaflet")
library(tidyverse)
library(knitr)
library(gridExtra)
library(kableExtra)
library(pROC)
library(leaflet)
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL") )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases)) %>%  head(10)
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
# Create map
map <- leaflet(topCaseLocation) %>%
addProviderTiles(providers$Stamen.TonerLite) %>%
setView(lng = -79.38, lat = 43.65, zoom = 11) # Set center and zoom level
# Add markers for each location
for (i in 1:nrow(topCaseLocation)) {
map <- map %>%
addMarkers(
lng = geocode(topCaseLocation$location[i])$lon,
lat = geocode(topCaseLocation$location[i])$lat,
popup = paste("Location: ", topCaseLocation$location[i], "<br>",
"Total Cases: ", topCaseLocation$TotalCases[i], "<br>",
"Death Rate: ", round(topCaseLocation$deathRate[i] * 100, 2), "%")
)
}
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL") )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases)) %>%  head(10)
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
# Create a data frame with the FSA and location information
fsa_location <- data.frame(
FSA = unique(main_data$FSA),
lat = NA,
lng = NA,
location = NA
)
# Loop through the data and extract the latitude, longitude, and location name for each FSA
for (i in 1:nrow(fsa_location)) {
loc <- main_data %>%
filter(FSA == fsa_location$FSA[i]) %>%
summarise(lat = mean(Latitude), lng = mean(Longitude), location = paste(FSA, Neighbourhood.Name, sep = " - "))
fsa_location$lat[i] <- loc$lat
fsa_location$lng[i] <- loc$lng
fsa_location$location[i] <- loc$location
}
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL") )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases)) %>%  head(10)
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
library(ggmap)
# Create a data frame with the FSA and location information
fsa_location <- data.frame(
FSA = unique(main_data$FSA),
location = NA
)
# Loop through the data and extract the location name for each FSA
for (i in 1:nrow(fsa_location)) {
loc <- main_data %>%
filter(FSA == fsa_location$FSA[i]) %>%
summarise(location = paste(FSA, Neighbourhood.Name, sep = " - "))$location
fsa_location$location[i] <- loc
}
# TABLES
#Relation between location and death rate
data_byLocation <- main_data %>%
filter(FSA != "") %>%
filter(Neighbourhood.Name != "") %>%
group_by(FSA) %>%
summarise(location = paste(FSA, Neighbourhood.Name, sep = " - "),
TotalCases = n(),
deathRate = mean(Outcome == "FATAL"))
head(data_byLocation)
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases)) %>%  head(10)
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
library(ggmap)
# Create a data frame with the FSA and location information
fsa_location <- data.frame(
FSA = unique(main_data$FSA),
location = NA
)
# Loop through the data and extract the location name for each FSA
for (i in 1:nrow(fsa_location)) {
loc <- main_data %>%
filter(FSA == fsa_location$FSA[i]) %>%
summarise(location = paste(FSA, Neighbourhood.Name, sep = " - "))$location
fsa_location$location[i] <- loc
}
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), deathRate = mean(Outcome == "FATAL") )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases))
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(), ) )
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n(),  )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases))
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
# TABLES
#Relation between location and death rate
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n() )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases))
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data, aes(x=Client.Gender, fill=Client.Gender)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#ggplot(data, aes(x=Client.Gender, fill=Client.Gender)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byGender, aes(x = Client.Gender, y = deathRate, fill=Client.Gender)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Gender Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
# Relation between gender and death rate
data_byGender = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))%>%arrange(desc(deathRate))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
# Relation between gender+age and death rate
data_byGender_Age = main_data %>% filter(Client.Gender!="") %>% group_by(Client.Gender,Age.Group)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL")) %>% arrange(desc(deathRate))
kbl(data_byGender) %>%
kable_styling(full_width = F, font_size = 10)
# TABLES
#Relation between location and total case
data_byLocation  = main_data %>% filter(FSA != "") %>%filter(Neighbourhood.Name != "")%>% mutate(location = paste(FSA, Neighbourhood.Name, sep = " - "))%>% group_by(location) %>% summarise(TotalCases=n() )
topCaseLocation = data_byLocation %>% arrange(desc(TotalCases))
kbl(topCaseLocation[1:10,]) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Client.Gender, fill=Client.Gender)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byGender, aes(x = Client.Gender, y = deathRate, fill=Client.Gender)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Gender Group", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#GROUP BY Outbreak.Associated
data_byOutbreakAssociated = data %>% filter(Outbreak.Associated!="") %>% group_by(Outbreak.Associated)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))
kbl(data_byOutbreakAssociated) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data, aes(x=Outbreak.Associated, fill=Outbreak.Associated)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#GROUP BY Outbreak.Associated
data_byOutbreakAssociated = main_data %>% filter(Outbreak.Associated!="") %>% group_by(Outbreak.Associated)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))
kbl(data_byOutbreakAssociated) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Outbreak.Associated, fill=Outbreak.Associated)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byOutbreakAssociated, aes(x = Outbreak.Associated, y = deathRate, fill=Outbreak.Associated)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Outbreak.Associated", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Goup By Source.of.Infection
data_byInfection = main_data %>% filter(Source.of.Infection!="") %>% group_by(Source.of.Infection)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))
kbl(data_byInfection %>% arrange(desc(TotalCases))) %>%
kable_styling(full_width = F, font_size = 10)
#GROUP BY Outbreak.Associated
data_byOutbreakAssociated = main_data %>% filter(Outbreak.Associated!="") %>% group_by(Outbreak.Associated)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>% arrange(desc(TotalCases))
kbl(data_byOutbreakAssociated) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Outbreak.Associated, fill=Outbreak.Associated)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byOutbreakAssociated, aes(x = Outbreak.Associated, y = deathRate, fill=Outbreak.Associated)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Outbreak.Associated", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Goup By Source.of.Infection
data_byInfection = main_data %>% filter(Source.of.Infection!="") %>% group_by(Source.of.Infection)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>% arrange(desc(TotalCases))
kbl(data_byInfection %>% arrange(desc(TotalCases))) %>%
kable_styling(full_width = F, font_size = 10)
#GROUP BY Outbreak.Associated
data_byOutbreakAssociated = main_data %>% filter(Outbreak.Associated!="") %>% group_by(Outbreak.Associated)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>% arrange(desc(deathRate))
kbl(data_byOutbreakAssociated) %>%
kable_styling(full_width = F, font_size = 10)
#Goup By Source.of.Infection
data_byInfection = main_data %>% filter(Source.of.Infection!="") %>% group_by(Source.of.Infection)%>%summarise( TotalCases=n(), deathRate = mean(Outcome == "FATAL"))%>% arrange(desc(TotalCases))
kbl(data_byInfection %>% arrange(desc(TotalCases))) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data, aes(x=Source.of.Infection, fill=Source.of.Infection)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
ggplot(main_data, aes(x=Source.of.Infection, fill=Source.of.Infection)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Relation between hospitalized and death rate
data_byHospitalized = main_data %>% filter(Ever.Hospitalized!="") %>% group_by(Ever.Hospitalized)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byHospitalized %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between hospitalized and death rate
data_byHospitalized = main_data %>% filter(Ever.Hospitalized!="") %>% group_by(Ever.Hospitalized)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL")) %>%arrange(desc(deathRate))
kbl(data_byHospitalized %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between hospitalized and death rate
data_byHospitalized = main_data %>% filter(Ever.Hospitalized!="") %>% group_by(Ever.Hospitalized)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL")) %>%arrange(desc(deathRate))
kbl(data_byHospitalized %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(main_data, aes(x=Ever.Hospitalized, fill=Ever.Hospitalized)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
ggplot(main_data, aes(x=Ever.Hospitalized, fill=Ever.Hospitalized)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#this case death rate is computed as before
data_byICU = main_data %>% filter(Ever.in.ICU!="")  %>% group_by(Ever.in.ICU) %>% summarise( TotalCases=n(),deathRate = mean(Outcome   == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#this case death rate is computed as before
data_byICU = main_data %>% filter(Ever.in.ICU!="")  %>% group_by(Ever.in.ICU) %>% summarise( TotalCases=n(),deathRate = mean(Outcome   == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
ggplot(data, aes(x=Ever.in.ICU, fill=Ever.in.ICU)) +
geom_bar(position = "dodge") +
facet_wrap(~Outcome, scales="free_y") +
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#ggplot(main_data, aes(x=Ever.Hospitalized, fill=Ever.Hospitalized)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byHospitalized, aes(x = Ever.Hospitalized, y = deathRate, fill=Ever.Hospitalized)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Ever.Hospitalized", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#ggplot(main_data, aes(x=Ever.Hospitalized, fill=Ever.Hospitalized)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byHospitalized, aes(x = Ever.Hospitalized, y = deathRate, fill=Ever.Hospitalized)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Ever.Hospitalized", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#this case death rate is computed as before
data_byICU = main_data %>% filter(Ever.in.ICU!="")  %>% group_by(Ever.in.ICU) %>% summarise( TotalCases=n(),deathRate = mean(Outcome   == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#this case death rate is computed as before
data_byICU = main_data %>% filter(Ever.in.ICU!="")  %>% group_by(Ever.in.ICU) %>% summarise( TotalCases=n(),deathRate = mean(Outcome   == "FATAL"))
data_byICU_spec = data %>% filter(Ever.in.ICU!="") %>%  filter(Ever.Hospitalized== "Yes") %>% group_by(Ever.in.ICU) %>%         summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#this case death rate is computed as before
data_byICU = main_data %>% filter(Ever.in.ICU!="")  %>% group_by(Ever.in.ICU) %>% summarise( TotalCases=n(),deathRate = mean(Outcome   == "FATAL"))
data_byICU_spec = data %>% filter(Ever.in.ICU!="") %>%  filter(Ever.Hospitalized== "Yes") %>% group_by(Ever.in.ICU) %>%         summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
kbl(data_byICU_spec %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#death rate is computed by only considering the case that Ever.Hospitalized== "Yes"
data_byICU = data %>% filter(Ever.in.ICU!="") %>%  filter(Ever.Hospitalized== "Yes") %>% group_by(Ever.in.ICU) %>%         summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
kbl(data_byICU_spec %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#death rate is computed by only considering the case that Ever.Hospitalized== "Yes"
data_byICU = data %>% filter(Ever.in.ICU!="") %>%  filter(Ever.Hospitalized== "Yes") %>% group_by(Ever.in.ICU) %>%         summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Ever.in.ICU, fill=Ever.in.ICU)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byICU, aes(x = Ever.in.ICU, y = deathRate, fill=Ever.in.ICU)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Ever.in.ICU", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Relation between ICU and death rate
# data_check = data %>% filter(Ever.in.ICU =="Yes" && Ever.Hospitalized== "No") gives 0 obs which means in icu must be in         hospital
#death rate is computed by only considering the case that Ever.Hospitalized== "Yes"
data_byICU = main_data %>% filter(Ever.in.ICU!="") %>%  filter(Ever.Hospitalized== "Yes") %>% group_by(Ever.in.ICU) %>%         summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byICU %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Ever.in.ICU, fill=Ever.in.ICU)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byICU, aes(x = Ever.in.ICU, y = deathRate, fill=Ever.in.ICU)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Ever.in.ICU", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Relation between intubated and death rate
#data_check = data %>% filter(Ever.in.ICU =="No" && Ever.Hospitalized== "Yes") gives 0 obs which means intubated must be in icu
data_byIntubated = main_data %>% filter(Ever.Intubated!="") %>% group_by(Ever.Intubated)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byIntubated %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Ever.Intubated, fill=Ever.Intubated)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byIntubated, aes(x = Ever.Intubated, y = deathRate, fill=Ever.Intubated)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Ever.Intubated", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
#Relation between intubated and death rate
#data_check = data %>% filter(Ever.in.ICU =="No" && Ever.Hospitalized== "Yes") gives 0 obs which means intubated must be in icu
data_byIntubated = main_data %>% filter(Ever.Intubated!="") %>% filter(Ever.in.ICU=="Yes") %>%   group_by(Ever.Intubated)%>%summarise( TotalCases=n(),deathRate = mean(Outcome == "FATAL"))
kbl(data_byIntubated %>% arrange(desc(deathRate))) %>%
kable_styling(full_width = F, font_size = 10)
#ggplot(data, aes(x=Ever.Intubated, fill=Ever.Intubated)) +
#    geom_bar(position = "dodge") +
#    facet_wrap(~Outcome, scales="free_y") +
#    theme(axis.text.x=element_blank(),
#          axis.title.x=element_blank())
ggplot(data_byIntubated, aes(x = Ever.Intubated, y = deathRate, fill=Ever.Intubated)) +
geom_bar(stat = "identity", alpha = 0.7) +
labs( x = "Ever.Intubated", y = "Death Rate") +
theme_minimal()+
theme(axis.text.x=element_blank(),
axis.title.x=element_blank())
